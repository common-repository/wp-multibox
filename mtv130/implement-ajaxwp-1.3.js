MultiBox.implement({setContentType:function(b){var d=b.href.substr(b.href.lastIndexOf(".")+1).toLowerCase();var c={};if(b.rel!=null){var a=b.rel.split(",");a.each(function(f){var e=f.split(":");c[e[0]]=e[1]})}if(c.type!=undefined){d=c.type}this.contentObj={};this.contentObj.url=b.href;this.contentObj.xH=0;this.contentObj.linkid=b.id;if(c.width){this.contentObj.width=c.width}else{this.contentObj.width=this.options.movieWidth}if(c.height){this.contentObj.height=c.height}else{this.contentObj.height=this.options.movieHeight}if(c.panel){this.panelPosition=c.panel}else{this.panelPosition=this.options.panel}switch(d){case"jpg":case"gif":case"png":this.type="image";break;case"swf":this.type="flash";break;case"flv":this.type="flashVideo";this.contentObj.xH=70;break;case"mov":this.type="quicktime";break;case"wmv":this.type="windowsMedia";break;case"rv":case"rm":case"rmvb":this.type="real";break;case"mp3":this.type="flashMp3";this.contentObj.width=320;this.contentObj.height=70;break;case"element":this.type="htmlelement";this.elementContent=b.content;this.elementContent.setStyles({display:"block",opacity:0,width:"auto"});if(this.elementContent.getStyle("width")!="auto"){this.contentObj.width=this.elementContent.getWidth()}this.contentObj.height=this.elementContent.getHeight();this.elementContent.setStyles({display:"none",opacity:1});break;default:this.type="iframe";if(c.ajax){this.type="ajax"}if(c.wpajax){this.type="wpajax"}break}},showContent:function(){this.box.removeClass("MultiBoxLoading");this.removeContent();this.contentContainer=new Element("div").setProperties({id:"MultiBoxContentContainer"}).setStyles({opacity:0,width:this.contentObj.width+"px",height:(Number(this.contentObj.height)+this.contentObj.xH)+"px"}).inject(this.box,"inside");if(this.type=="image"){this.contentObj.inject(this.contentContainer,"inside");this.fireEvent("success")}else{if(this.type=="iframe"){new Element("iframe").setProperties({id:"iFrame"+new Date().getTime(),width:this.contentObj.width,height:this.contentObj.height,src:this.contentObj.url,frameborder:0,scrolling:"auto"}).inject(this.contentContainer,"inside");this.fireEvent("success")}else{if(this.type=="htmlelement"){this.contentContainer.setStyle("overflow","auto");this.elementContentParent=this.elementContent.getParent();this.elementContent.setStyle("display","block").inject(this.contentContainer,"inside");this.fireEvent("success")}else{if(this.type=="ajax"){var e=this;var c=new Request.HTML({url:this.contentObj.url,update:$("MultiBoxContentContainer"),method:"get",evalScripts:true,onSuccess:function(){e.fireEvent("success")}}).get()}else{if(this.type=="wpajax"){var e=this;var b=WMPAjaxParams.AjaxUrl;var a=this.contentObj.linkid;if(typeof WMPAjaxParams.AjaxLang!=="undefined"||WMPAjaxParams.AjaxLang!==null){var d={action:"multibox_ajax_inclusion",target_id:a.replace(WMPAjaxParams.WMPclassName+"-ajax-",""),lang:WMPAjaxParams.AjaxLang}}else{var d={action:"multibox_ajax_inclusion",target_id:a.replace(WMPAjaxParams.WMPclassName+"-ajax-","")}}var c=new Request.HTML({url:b,update:$("MultiBoxContentContainer"),evalResponse:true,evalScripts:true,onSuccess:function(){e.fireEvent("success")}}).post(d)}else{var f=this.createEmbedObject().inject(this.contentContainer,"inside");if(this.str!=""){$("MultiBoxMediaObject").innerHTML=this.str;this.fireEvent("success")}}}}}}this.contentEffects=new Fx.Morph(this.contentContainer,{duration:500});this.contentEffects.start({opacity:1});this.title.set("html",this.contentToLoad.title);this.number.set("html",this.contentToLoad.number+" of "+this.content.length);if(this.options.descClassName){if(this.description.getFirst()){this.description.getFirst().destroy()}if(this.contentToLoad.desc.nodeName=="DIV"){this.contentToLoad.desc.inject(this.description,"inside").setStyles({display:"block"})}}if(this.options.showControls){this.timer=this.showControls.bind(this).delay(800)}this.fireEvent("success")}});